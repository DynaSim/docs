<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of checkHostPaths</title>
  <meta name="keywords" content="checkHostPaths">
  <meta name="description" content="CHECKHOSTPATHS - Compare paths on host to those set in studyinfo when batch was created">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html functions --><!-- menu.html +ds -->
<h1>checkHostPaths
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>CHECKHOSTPATHS - Compare paths on host to those set in studyinfo when batch was created</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function [matched,error_message] = checkHostPaths(studyinfo, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">CHECKHOSTPATHS - Compare paths on host to those set in studyinfo when batch was created

 Call ds.checkHostPaths() in job.m before first simulation to make sure the
 paths on the compute matchine match those in studyinfo created when the
 study was began.

 If paths do not match, an informative error message is added to
 .error_log (see ds.createBatch() or any jobX.m script).

 Usage:
   ds.checkHostPaths(studyinfo)

 Inputs:
   - studyinfo: DynaSim studyinfo structure

 Outputs:
   - matched: {0 or 1} (whether the paths match or not)

 Paths compared:
 - path to DynaSim functions
 - path to model files</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [matched,error_message] = checkHostPaths(studyinfo, varargin)</a>
0002 <span class="comment">%CHECKHOSTPATHS - Compare paths on host to those set in studyinfo when batch was created</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Call ds.checkHostPaths() in job.m before first simulation to make sure the</span>
0005 <span class="comment">% paths on the compute matchine match those in studyinfo created when the</span>
0006 <span class="comment">% study was began.</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% If paths do not match, an informative error message is added to</span>
0009 <span class="comment">% .error_log (see ds.createBatch() or any jobX.m script).</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% Usage:</span>
0012 <span class="comment">%   ds.checkHostPaths(studyinfo)</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% Inputs:</span>
0015 <span class="comment">%   - studyinfo: DynaSim studyinfo structure</span>
0016 <span class="comment">%</span>
0017 <span class="comment">% Outputs:</span>
0018 <span class="comment">%   - matched: {0 or 1} (whether the paths match or not)</span>
0019 <span class="comment">%</span>
0020 <span class="comment">% Paths compared:</span>
0021 <span class="comment">% - path to DynaSim functions</span>
0022 <span class="comment">% - path to model files</span>
0023 
0024 <span class="comment">%% auto_gen_test_data_flag argin</span>
0025 options = ds.checkOptions(varargin,{<span class="string">'auto_gen_test_data_flag'</span>,0,{0,1}},false);
0026 <span class="keyword">if</span> options.auto_gen_test_data_flag
0027   varargs = varargin;
0028   varargs{find(strcmp(varargs, <span class="string">'auto_gen_test_data_flag'</span>))+1} = 0;
0029   varargs(end+1:end+2) = {<span class="string">'unit_test_flag'</span>,1};
0030   argin = [{studyinfo}, varargs]; <span class="comment">% specific to this function</span>
0031 <span class="keyword">end</span>
0032 
0033 matched=1;
0034 error_message=<span class="string">''</span>;
0035 
0036 <span class="comment">% locate DynaSim toolbox</span>
0037 dynasim_path = ds.getRootPath(); <span class="comment">% root is one level up from directory containing this function</span>
0038 
0039 <span class="comment">% locate mechanism files</span>
0040 [mech_paths,mech_files]=ds.locateModelFiles(studyinfo.base_model);
0041 
0042 <span class="comment">% compare DynaSim toolbox paths</span>
0043 <span class="keyword">if</span> ~isequal(dynasim_path, studyinfo.paths.dynasim_functions)
0044   matched=0;
0045   error_message=sprintf(<span class="string">'%sPath changed to DynaSim functions (expected: %s, found: %s). '</span>,error_message,studyinfo.paths.dynasim_functions,dynasim_path);
0046 <span class="keyword">end</span>
0047   
0048 <span class="comment">% compare model paths</span>
0049 <span class="keyword">if</span> ~isequal(unique(mech_paths),unique(studyinfo.paths.mechanisms))
0050   matched=0; mech_paths, studyinfo.paths.mechanisms
0051   error_message=sprintf(<span class="string">'%sPath changed to model files (expected: %s, found: %s). '</span>,error_message,[studyinfo.paths.mechanisms{:}],[mech_paths{:}]);
0052 <span class="keyword">end</span>
0053 
0054 <span class="comment">%% auto_gen_test_data_flag argout</span>
0055 <span class="keyword">if</span> options.auto_gen_test_data_flag
0056   argout = {matched, error_message}; <span class="comment">% specific to this function</span>
0057   
0058   ds.unit.saveAutoGenTestData(argin, argout);
0059 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 28-Apr-2017 19:07:58 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>