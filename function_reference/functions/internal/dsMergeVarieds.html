<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of dsMergeVarieds</title>
  <meta name="keywords" content="dsMergeVarieds">
  <meta name="description" content="[data_new, variedname_merged, varied_vals ] = mergeVarieds(data,varied_fields)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../menu.html functions --><!-- menu.html internal -->
<h1>dsMergeVarieds
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>[data_new, variedname_merged, varied_vals ] = mergeVarieds(data,varied_fields)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function [data_new, variedname_merged, varied_vals ] = dsMergeVarieds(data,varied_fields) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> [data_new, variedname_merged, varied_vals ] = mergeVarieds(data,varied_fields)

 Purpose: This function takes in the current DynaSim datastructure, data, and
 returns data_new. data_new is the same as the original, except the
 fields listed in varied_fields are merged together. This is useful
 for 

 Usage:
   [data_new, variedname_merged, varied_vals ] = mergeVarieds(data,varied_fields)

 Inputs:
   data: DynaSim data structure
   varied_fields: cell array of field names that will be merged
   together

 Outputs:
   data_new: DynaSim output structure
   variedname_merged: New varied fieldname assigned to the merge varied fields
   varied_vals: New values assigned to the merge varied fields

 Examples:
   [data, variedname_merged, varied_vals ] = mergeVarieds(data,vary_labels(linked_inds{j}));
   (see ds2mdd for example)
 
 Submodules: cat_with_underscores

 Author: David Stanley, Boston University, 2017

 See also: unmergeVarieds, modifications2Vary, vary2Modifications</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="ds2mdd.html" class="code" title="function xp = ds2mdd(data,merge_covaried_axes,merge_sparse_axes,varargin)">ds2mdd</a>	Convert DynaSim data structure to xp format</li><li><a href="dsAutoMergeVarieds.html" class="code" title="function [data, variedname_merged, varied_vals ] = dsAutoMergeVarieds(data,strategy,verbose_on,varargin)">dsAutoMergeVarieds</a>	[data_new, variedname_merged, varied_vals ] = mergeVarieds(data,varied_fields)</li><li><a href="dsImg2mdd.html" class="code" title="function xp = dsImg2mdd(data_img,merge_covaried_axes,merge_sparse_axes,varargin)">dsImg2mdd</a>	</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function str_out = cat_with_underscores(cellstr_in)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [data_new, variedname_merged, varied_vals ] = dsMergeVarieds(data,varied_fields)</a>
0002     <span class="comment">% [data_new, variedname_merged, varied_vals ] = mergeVarieds(data,varied_fields)</span>
0003     <span class="comment">%</span>
0004     <span class="comment">% Purpose: This function takes in the current DynaSim datastructure, data, and</span>
0005     <span class="comment">% returns data_new. data_new is the same as the original, except the</span>
0006     <span class="comment">% fields listed in varied_fields are merged together. This is useful</span>
0007     <span class="comment">% for</span>
0008     <span class="comment">%</span>
0009     <span class="comment">% Usage:</span>
0010     <span class="comment">%   [data_new, variedname_merged, varied_vals ] = mergeVarieds(data,varied_fields)</span>
0011     <span class="comment">%</span>
0012     <span class="comment">% Inputs:</span>
0013     <span class="comment">%   data: DynaSim data structure</span>
0014     <span class="comment">%   varied_fields: cell array of field names that will be merged</span>
0015     <span class="comment">%   together</span>
0016     <span class="comment">%</span>
0017     <span class="comment">% Outputs:</span>
0018     <span class="comment">%   data_new: DynaSim output structure</span>
0019     <span class="comment">%   variedname_merged: New varied fieldname assigned to the merge varied fields</span>
0020     <span class="comment">%   varied_vals: New values assigned to the merge varied fields</span>
0021     <span class="comment">%</span>
0022     <span class="comment">% Examples:</span>
0023     <span class="comment">%   [data, variedname_merged, varied_vals ] = mergeVarieds(data,vary_labels(linked_inds{j}));</span>
0024     <span class="comment">%   (see ds2mdd for example)</span>
0025     <span class="comment">%</span>
0026     <span class="comment">% Submodules: cat_with_underscores</span>
0027     <span class="comment">%</span>
0028     <span class="comment">% Author: David Stanley, Boston University, 2017</span>
0029     <span class="comment">%</span>
0030     <span class="comment">% See also: unmergeVarieds, modifications2Vary, vary2Modifications</span>
0031     <span class="comment">%</span>
0032 
0033     varied_vals = cell(length(data),length(varied_fields));
0034     <span class="keyword">for</span> i = 1:length(data)
0035         data_temp = data(i);
0036         variedname_merged = <a href="#_sub1" class="code" title="subfunction str_out = cat_with_underscores(cellstr_in)">cat_with_underscores</a>(varied_fields);
0037         variedname_merged = strcat(<span class="string">'Covaried_'</span>,variedname_merged);
0038         
0039         <span class="keyword">for</span> j = 1:length(varied_fields)
0040             
0041             varied_vals{i,j} = data_temp.(varied_fields{j});       <span class="comment">% Store varied value. Storead as varied x sim number</span>
0042             data_temp = rmfield(data_temp,varied_fields{j});         <span class="comment">% Remove original fields</span>
0043         <span class="keyword">end</span>
0044         
0045         varied_str{i} = cellfun(@(x) num2str(x),varied_vals(i,:),<span class="string">'UniformOutput'</span>,0);
0046         varied_str{i} = <a href="#_sub1" class="code" title="subfunction str_out = cat_with_underscores(cellstr_in)">cat_with_underscores</a>(varied_str{i});
0047         data_temp.(variedname_merged) = varied_str{i};
0048         
0049         [~, inds] = intersect(data_temp.varied,varied_fields);
0050         inds2 = true(1,length(data_temp.varied));
0051         inds2(inds) = false;
0052         data_temp.varied = data_temp.varied(inds2);
0053         data_temp.varied{end+1} = variedname_merged;
0054         
0055         data_new(i) = data_temp;
0056     <span class="keyword">end</span>
0057     
0058     
0059     
0060 
0061 <span class="keyword">end</span>
0062 
0063 <a name="_sub1" href="#_subfunctions" class="code">function str_out = cat_with_underscores(cellstr_in)</a>
0064 <span class="comment">% Takes in a cell array of chars and concatenates them together with</span>
0065 <span class="comment">% underscores separating the original divisions between cells. E.g.</span>
0066 <span class="comment">% {'cat','dog'} becomes 'cat_dog'</span>
0067     
0068     temp = vertcat(cellstr_in(:)', repmat({<span class="string">'_'</span>},1,length(cellstr_in)));
0069     temp = temp(:)';
0070     str_out = horzcat(temp{1:end-1});
0071 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 23-Jun-2017 18:15:58 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>